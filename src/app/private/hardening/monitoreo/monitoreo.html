<app-breadcrums />
<div class="content">
  <app-header />

  <div class="row barra-menu">
    <div class="col text-end">
      <button (click)="funcNoti()" class="btn btn-white text-primary noti" title="Notificaciones">
          <i class="fas fa-bell mr-1"></i>
          <span class="badge text-bg-danger">{{lstLogs.length}}</span>
      </button>
      <button (click)="funcCancelar()" class="btn btn-danger btn-sm ml-1">
        <i class="fas fa-reply"></i> Retornar
      </button>
    </div>
  </div>

  
  <div *ngIf="puedeVerMonitoreo" class="row mt-2">
    <div class="col-12">
      <div class="d-flex justify-content-between mb-2">
        <h6>
          Monitoreo 
          <i *ngIf="loadMonitoreo" class="t12 text-success"><i class="fas fa-spinner fa-spin "></i> Cargando</i>
          <br>
          <small class="text-secondary"><i>Conectado al servidor por medio del Agente</i></small>
        </h6> 
        <div class="d-flex justify-content-between mb-2">
          <div class="btn-group mr-1" role="group" aria-label="Basic example">
            <button [disabled]="playMonitor"  class="btn btn-primary btn-sm" (click)="startMonitor()"  title="Iniciar Monitoreo"><i class="fas fa-play"></i> Iniciar</button>
            <button [disabled]="!playMonitor" class="btn btn-primary btn-sm" (click)="stopMonitor()"  title="Detener Monitoreo"><i class="fas fa-stop"></i> Detener</button>
            <button [disabled]="playMonitor"  class="btn btn-primary btn-sm" (click)="sendMonitor()"  title="Monitorear una vez"><i class="far fa-play-circle"></i> Una vez</button>
          </div>
          <small class="mt-2 mr-1 text-secondary"><i>Intervalo</i></small>
          <div style="width: 50px;">
            <input [disabled]="playMonitor" id="refresh" type="text" class="form-control" [(ngModel)]="tiempo_refresco">
          </div>
          <small class="mt-2 ml-1 text-secondary"><i>Seg.</i></small>
          <!-- <small  class="text-secondary t11" >
            <i>Tiempo de refresco: {{playMonitor ? tiempo_refresco + ' segundos' : 'desactivado'}} </i>
          </small> -->
        </div>
      </div>
      <div #myMonitor id="myMonitor" class="ag-theme-quartz scrollx" style="height: 120px; min-height: 120px"></div>
      <!-- <div class="row">
        @for (mon of this.work.servidores; track $index) {
          <app-monitoreo  [servidor]="mon" />
        }
      </div> -->
    </div>
  </div>
  <div class="row mt-2">
    <div class="col-12 col-sm-12 col-md-6 col-lg-4 col-xl-3">
      <h6>Logs</h6>
      <pre class="form-control t10" [innerHTML]="logHtml"></pre>
    </div>
  </div>
</div>
