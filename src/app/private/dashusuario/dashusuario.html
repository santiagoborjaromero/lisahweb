
<app-path [lstRutas]="path" />
<div class="content">
  <app-titulo [lstHeader]="titulo" />

  <section class="row barra-menu">
    <div class="col d-flex justify-content-between">
      <div class="d-flex justify-content-start">
        <div class="dropdown">
        </div>
      </div>
      <div>
        <button role="button"  role="button"  (click)="initial()" aria-label="Refrescar" class="btn btn-white btn-sm ml-1" title="Refrescar">
          <i role="img" class="fas fa-sync-alt"></i>
        </button>
      </div>
    </div>
  </section>

  <section class="row">
    <div class="col-12 col-md-8 h400XX">
      <div class="row">
        <span class="bold">TOP 4 - Servidores con más interacciones vs el total del mes actual  </span> <br>
        <small><i>Número de peticiones realizadas por el usuario en los servidores asignados (TOP=4)</i></small>
      </div>
      <div class="row text-center">
        <!-- <canvas
          baseChart
          width="1200"
          height="400"
          [type]="'line'"
          [data]="cpuChartData"
          [options]="cpuChartOptions"
          [legend]="chartLegend"
        >
        </canvas> -->
        @for (item of lstServidoresAsignados; track $index) {
          @if($index < 3){
            <div class="cardS col-6 col-md-3 p-1 " >
              <div class="card-body text-center">
                <div class="porcentajes" style="--porcentaje: {{item.porcentaje}}%; --color: forestgreen">
                  <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewbox="0 0 150 150">
                    <circle r="65" cx="50%" cy="50%" pathLength="928.32"></circle>
                    <circle r="65" cx="50%" cy="50%" pathLength="928.32"></circle>
                  </svg>
                  <span>{{item.porcentaje | number:'1.2-2'}}%</span>
                </div>
                <p class="card-text t12">
                  Interacciones {{item.conteo}} de total {{item.total}}
                </p>
                <p class="card-text t18 text-uppercase bold"><i class="fas fa-server"></i> {{item.nombre}}</p>
              </div>
            </div>
          }
        }

        @if (lstServidoresAsignados.length<4){
          @for (item of [].constructor(4 - lstServidoresAsignados.length) ; track $index) {
            <div class="cardS col-6 col-md-3 p-1 " >
              <div class="card-body text-center">
                <div class="porcentajes" style="--porcentaje: 0%; --color: forestgreen">
                  <svg xmlns="http://www.w3.org/2000/svg" width="150" height="150" viewbox="0 0 150 150">
                    <circle r="65" cx="50%" cy="50%" pathLength="928.32"></circle>
                    <circle r="65" cx="50%" cy="50%" pathLength="928.32"></circle>
                  </svg>
                  <span>0%</span>
                </div>
                <p class="card-text t12">
                  Interacciones 0 de total 0
                </p>
                <p class="card-text text-secondary t18 text-uppercase bold"><i class="fas fa-server"></i> NO ASIGNADO</p>
              </div>
            </div>
          }
        }
        
      </div>
        <div class="col-12 col-md-12 mt-5">
          <div class="row">
            <span class="bold">Acciones por area </span> <br>
            <small><i>Número de acciones realizadas en el sistema por ruta</i></small>
          </div>
          <div class="row p-2">
          @for (item of lstAcciones; track $index) {
            <div class="card col-6 col-md-3" >
              <div class="card-body text-end">
                <h5 class="card-title"><span class="bold text-danger t30">{{item.total}}</span></h5>
                <p class="card-text t12 text-uppercase">{{item.descripcion}}</p>
              </div>
            </div>
          }
          </div>
        </div>


    </div>
    <div class="col-12 col-md-4 h400xs">
      <div class="row">
        <span class="bold">TOP 10 - Actividad reciente</span> <br>
        <small><i>Número de acciones realizadas en el sistema por area</i></small>
      </div>
      <div class="row  p-2">
        <ul class="list-group list-group-flush" >
          @for (item of lstUltimasAcciones; track $index) {
            <li class="list-group-item mt-1 {{item.back}}" >
              <span class="bold t18">{{item.metodo}}</span>
              <span class="t16">{{item.ruta}}</span>
              <br>
              <span class="t12 text-secondary bold">{{item.fecha}}</span>
            </li>
          }
        </ul>
      </div>
    </div>
  </section>
  
</div>


